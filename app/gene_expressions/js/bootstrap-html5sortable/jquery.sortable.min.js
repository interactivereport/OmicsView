(function(a){var c,e=a();a.fn.sortable=function(b){var k=String(b);b=a.extend({connectWith:!1},b);return this.each(function(){if(/^enable|disable|destroy$/.test(k)){var g=a(this).children(a(this).data("items")).attr("draggable","enable"==k);"destroy"==k&&g.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}else{var h,l,g=a(this).children(b.items),f=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":
"div")+' class="sortable-placeholder '+b.placeholderClass+'">').html("&nbsp;");g.find(b.handle).mousedown(function(){h=!0}).mouseup(function(){h=!1});a(this).data("items",b.items);e=e.add(f);b.connectWith&&a(b.connectWith).add(this).data("connectWith",b.connectWith);g.attr("draggable","true").on("dragstart.h5s",function(d){if(b.handle&&!h)return!1;h=!1;d=d.originalEvent.dataTransfer;d.effectAllowed="move";d.setData("Text","dummy");l=(c=a(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",
function(){c&&(c.removeClass("sortable-dragging").show(),e.detach(),l!=c.index()&&c.parent().trigger("sortupdate",{item:c}),c=null)}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return!1}).end().add([this,f]).on("dragover.h5s dragenter.h5s drop.h5s",function(d){if(!g.is(c)&&b.connectWith!==a(c).parent().data("connectWith"))return!0;if("drop"==d.type)return d.stopPropagation(),e.filter(":visible").after(c),c.trigger("dragend.h5s"),!1;d.preventDefault();d.originalEvent.dataTransfer.dropEffect=
"move";g.is(this)?(b.forcePlaceholderSize&&f.height(c.outerHeight()),c.hide(),a(this)[f.index()<a(this).index()?"after":"before"](f),e.not(f).detach()):e.is(this)||a(this).children(b.items).length||(e.detach(),a(this).append(f));return!1})}})}})(jQuery);